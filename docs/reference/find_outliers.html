<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Detect outliers — find_outliers • joeyr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Detect outliers — find_outliers" />
<meta property="og:description" content="This is an implementation of the Mahalanobis Distance that is less sensitive
to outliers. Instead of a blanket filter applying all at once, it iteratively 
removes points one at a time until a predetermined proportion of data has been
removed." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-86802921-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-86802921-2');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">joeyr</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Detect outliers</h1>
    
    <div class="hidden name"><code>find_outliers.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This is an implementation of the Mahalanobis Distance that is less sensitive
to outliers. Instead of a blanket filter applying all at once, it iteratively 
removes points one at a time until a predetermined proportion of data has been
removed.</p>
    </div>

    <pre class="usage"><span class='fu'>find_outliers</span>(<span class='no'>...</span>, <span class='kw'>keep</span> <span class='kw'>=</span> <span class='fl'>0.95</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>...</th>
      <td><p>A list of columns in your data that should be included when
calculating the Mahalanobis distance. The column names should not be in
quotes. For vowel data, you typically include F1 and F2. You may also 
want to include F3, duration, and any other continuous variable.</p></td>
    </tr>
    <tr>
      <th>keep</th>
      <td><p>A number indicating the proportion of data (per group) to keep.
By default, it's 0.95 so it keeps 95% of the data and filters out 5%.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A vector of TRUE/FALSE values. They are in the same order as the original
  dataset. Observations that are considered outliers have the value TRUE. It is 
  easiest to work with this by appending this vector to your dataframe.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The Mahalanobis distance function is somewhat sensitive to outliers, so if
there are extreme values in your data, the mean value will be off-center from
the centroid of your observations. Consequently, the Mahalanobis Distances
will be based on this off-center points, which is probably not desirable. 
This function alleviates this sensitivity to outliers by implementing a 
one-at-a-time method.</p>
<p>When you run this function, it will first calculate Mahalanobis distance from
the mean of all values. It detects the point furthest from the mean and
removes it. Then, it recalculates the Mahalanobis distance with the remaining
values and again removes the furthest value. It continues this
recalculation-and-removal method until a predetermined proportion of values
has been removed.</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>While not required, you should typically "group" your data before applying
  this function. For example, you can group your data by speaker and vowel so 
  that the function applies independently for each vowel for each speaker. I 
  normally do this with <code><a href='https://dplyr.tidyverse.org/reference/group_by.html'>dplyr::group_by(speaker, word)</a></code></p>  
<p>Note also that in American English, allophonic variation of some vowels is so 
  great that grouping by vowel may not be enough. If you're working with /u/ for
  example, it's a good idea to split it into three groups: post-coronal, pre-lateral,
  and elsewhere. For /æ/, it's a good idea to group prenasal tokens separatly. 
  If you're using FAVE/DARLA/MFA output, the NORTH and FORCE classes of words
  are transcribed with AO, so it's a good idea to treat those separately. The point 
  is to be mindful of allophonic variation in your data and that it's a good 
  idea to group the data by vowel <em>class</em> rather than by vowel. You may have to 
  do some processing before the filter happens to get this to happen.</p>  
<p>Finally, be aware that no tokens will be marked as outliers if the are not 
  a sufficient number of tokens. So if you want to remove 5<!-- % of the tokens,  -->
  you'll need to have at least 20 tokens in a group for an outlier to be
  found within that group. A message will let you know if this happens. 
  Unfortunately, the function cannot help determine which group(s) the 
  message came from, but you can find out with <code><a href='https://dplyr.tidyverse.org/reference/count.html'>dplyr::count()</a></code>. See the
  examples.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>dplyr</span>)</div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>Attaching package: ‘dplyr’</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from ‘package:stats’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    filter, lag</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from ‘package:base’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    intersect, setdiff, setequal, union</span></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span>(<span class='no'>joey_coronals</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: data set ‘joey_coronals’ not found</span></div><div class='input'>
<span class='co'># You can output the data to a column called something like "is_outlier" and </span>
<span class='co'># then filter out values that are TRUE.</span>
<span class='no'>joey_coronals</span> <span class='kw'>%&gt;%</span>
   <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span>(<span class='no'>vowel</span>) <span class='kw'>%&gt;%</span>
   <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span>(<span class='kw'>is_outlier</span> <span class='kw'>=</span> <span class='fu'>find_outliers</span>(<span class='no'>F1</span>, <span class='no'>F2</span>, <span class='kw'>keep</span> <span class='kw'>=</span> <span class='fl'>0.95</span>)) <span class='kw'>%&gt;%</span>
   <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span>(!<span class='no'>is_outlier</span>)</div><div class='output co'>#&gt; <span class='error'>Error in eval(lhs, parent, parent): object 'joey_coronals' not found</span></div><div class='input'>
<span class='co'># Alternatively, you can skip a step and just keep the data that are not </span>
<span class='co'># outliers.</span>
<span class='no'>joey_coronals</span> <span class='kw'>%&gt;%</span>
   <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span>(<span class='no'>vowel</span>) <span class='kw'>%&gt;%</span>
   <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span>(!<span class='fu'>find_outliers</span>(<span class='no'>F1</span>, <span class='no'>F2</span>))</div><div class='output co'>#&gt; <span class='error'>Error in eval(lhs, parent, parent): object 'joey_coronals' not found</span></div><div class='input'>
<span class='co'># In some cases, you might not have enough data. In this case, a warning </span>
<span class='co'># message will appear.</span>
<span class='no'>joey_coronals</span> <span class='kw'>%&gt;%</span>
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span>(<span class='no'>percent</span> <span class='kw'>==</span> <span class='fl'>50</span>) <span class='kw'>%&gt;%</span>
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span>(<span class='no'>vowel</span>) <span class='kw'>%&gt;%</span>
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span>(<span class='kw'>is_outlier</span> <span class='kw'>=</span> <span class='fu'>find_outliers</span>(<span class='no'>F1</span>, <span class='no'>F2</span>, <span class='kw'>keep</span> <span class='kw'>=</span> <span class='fl'>0.95</span>))</div><div class='output co'>#&gt; <span class='error'>Error in eval(lhs, parent, parent): object 'joey_coronals' not found</span></div><div class='input'><span class='co'># You can find out which groups is problematic with `dplyr::count()`:</span>
<span class='no'>joey_coronals</span> <span class='kw'>%&gt;%</span>
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span>(<span class='no'>percent</span> <span class='kw'>==</span> <span class='fl'>50</span>) <span class='kw'>%&gt;%</span>
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span>(<span class='no'>vowel</span>) <span class='kw'>%&gt;%</span>
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/count.html'>count</a></span>()</div><div class='output co'>#&gt; <span class='error'>Error in eval(lhs, parent, parent): object 'joey_coronals' not found</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Joseph A. Stanley.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


