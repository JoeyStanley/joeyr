<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Code allophones — code_allophones • joeyr</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Code allophones — code_allophones"><meta property="og:description" content="A function to classify vowel data into contextual allophones."><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@joey_stan"><meta name="twitter:site" content="@joey_stan"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-86802921-3"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-86802921-3');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">joeyr</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.8</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/JoeyStanley/joeyr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Code allophones</h1>
    <small class="dont-index">Source: <a href="https://github.com/JoeyStanley/joeyr/blob/HEAD/R/sociophonetics.R" class="external-link"><code>R/sociophonetics.R</code></a></small>
    <div class="hidden name"><code>code_allophones.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>A function to classify vowel data into contextual allophones.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">code_allophones</span><span class="op">(</span>
  <span class="va">.df</span>,
  <span class="va">.old_col</span>,
  .new_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"allophone"</span>, <span class="st">"allophone_environment"</span><span class="op">)</span>,
  <span class="va">.pre_seg</span>,
  <span class="va">.fol_seg</span>,
  .coronals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"T"</span>, <span class="st">"D"</span>, <span class="st">"S"</span>, <span class="st">"Z"</span>, <span class="st">"SH"</span>, <span class="st">"ZH"</span>, <span class="st">"JH"</span>, <span class="st">"N"</span><span class="op">)</span>,
  .voiceless <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"P"</span>, <span class="st">"T"</span>, <span class="st">"K"</span>, <span class="st">"CH"</span>, <span class="st">"F"</span>, <span class="st">"TH"</span>, <span class="st">"S"</span>, <span class="st">"SH"</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>.df</dt>
<dd><p>The dataset containing vowel data.</p></dd>
<dt>.old_col</dt>
<dd><p>The unquoted name of the column containing the vowel labels. 
Often called "vowel" or "phoneme" in many datasets. Note that the function 
assumes Wells lexical sets (FLEECE, TRAP, etc.) rather than ARPABET (IY, AE, etc.) 
or IPA (i, æ, etc.). If your vowels are not already coded using Wells' labels
you can quickly do so with <code>switch_transcriptions</code> or one of the 
shortcuts like <code>arpa_to_wells</code></p></dd>
<dt>.new_cols</dt>
<dd><p>A vector of two strings containing the names of the columns
you would like to use. By default <code>c("allophone", "allophone_environment")</code>.
The first name becomes the name of the column containing the new allophone
labels. The second column becomes the name of the column describing those
labels.</p></dd>
<dt>.pre_seg</dt>
<dd><p>The unquoted name of the column that contains the labels for 
the previous segement. In DARLA-generated spreadsheets, this is `pre_seg` and 
in FastTrack-generated spreadsheets, it's `previous_sound`. Assumes ARPABET 
labels.</p></dd>
<dt>.fol_seg</dt>
<dd><p>The unquoted name of the column that contains the labels for 
the following segement. In DARLA-generated spreadsheets, this is `fol_seg` and 
in FastTrack-generated spreadsheets, it's `next_sound`. Assumes ARPABET labels.</p></dd>
<dt>.coronals</dt>
<dd><p>A vector of strings containing ARPABET labels for coronal consonants.
By default, <code>c("T", "D", "S", "Z", "SH", "ZH", "JH", "N")</code>. This is used
to create the `TOOT` allophone of `GOOSE`.</p></dd>
<dt>.voiceless</dt>
<dd><p>A vector of strings containing ARPABET labels for voiceless
consonants. By default, <code>c("P", "T", "K", "CH", "F", "TH", "S", "SH")</code>. 
This is used to create the `PRICE` allophone of `PRIZE`.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A dataframe with two additional columns. One column contains labels 
for the allophones and the other contains category labels for those 
allophones' contexts. The second column can be useful for quickly excluding 
certain allophones like prelaterals or prerhotics or coloring families of 
allophones in visualizations (such as turning all prelateral allophones gray). 
These two new columns are positioned immediately after the original vowel 
column indicated in <code>.old_col</code>,</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>Here are the list of the contextual allophones that are created. Note 
that I largely follow my own advice about what to call <a href="https://joeystanley.com/blog/why-do-people-use-bat-instead-of-trap" class="external-link">elsewhere allophones</a>,
what to call <a href="https://joeystanley.com/blog/extending-wells-lexical-sets-to-prelateral-vowels" class="external-link">prelateral allophones</a>, 
and <a href="https://joeystanley.com/blog/thoughts-on-allophonic-extensions-to-wells-lexical-sets" class="external-link">other allophones</a>. 
Obviously, this list is pretty subjective and largely based on what my own 
research has needed, so it may not work completely for you and your research. 
Please contact me at <a href="mailto:joey_stanley@byu.edu">joey_stanley@byu.edu</a> if you want to see an allophone 
get added or if you spot an error in the coding.</p>
<ul><li><p>FLEECE becomes</p><ul><li><p>ZEAL before laterals</p></li>
<li><p>BEET elsewhere</p></li>
</ul></li>
<li><p>KIT becomes</p><ul><li><p>GUILT before laterals</p></li>
<li><p>NEAR before rhotics</p></li>
<li><p>BIG before G</p></li>
<li><p>BIN before M and N</p></li>
<li><p>BING before NG</p></li>
<li><p>BIT elsewhere</p></li>
</ul></li>
<li><p>FACE becomes</p><ul><li><p>FLAIL before laterals</p></li>
<li><p>VAGUE before G</p></li>
<li><p>X elsewhere</p></li>
</ul></li>
<li><p>DRESS becomes</p><ul><li><p>SHELF before laterals</p></li>
<li><p>SQUARE before rhotics</p></li>
<li><p>BEG before G</p></li>
<li><p>BEN before M and N</p></li>
<li><p>BENG before NG</p></li>
<li><p>BET elsewhere</p></li>
</ul></li>
<li><p>TRAP becomes</p><ul><li><p>TALC before laterals</p></li>
<li><p>BAG before G</p></li>
<li><p>BAN before M and N</p></li>
<li><p>BANG before NG</p></li>
<li><p>BAT elsewhere</p></li>
</ul></li>
<li><p>LOT becomes</p><ul><li><p>GOLF before laterals</p></li>
<li><p>START before rhotics</p></li>
<li><p>BOT elsewhere</p></li>
</ul></li>
<li><p>THOUGHT becomes</p><ul><li><p>FAULT before laterals</p></li>
<li><p>FORCE befpre rhotics</p></li>
<li><p>BOUGHT elsewhere</p></li>
</ul></li>
<li><p>STRUT becomes</p><ul><li><p>MULCH before laterals</p></li>
<li><p>BUT elsewhere</p></li>
</ul></li>
<li><p>GOAT becomes</p><ul><li><p>JOLT before laterals</p></li>
<li><p>BOAT elsewhere</p></li>
</ul></li>
<li><p>FOOT becomes</p><ul><li><p>WOLF before laterals</p></li>
<li><p>CURE before rhotics</p></li>
<li><p>PUT elsewhere</p></li>
</ul></li>
<li><p>GOOSE becomes</p><ul><li><p>MULE before Y</p></li>
<li><p>TOOT before coronals</p></li>
<li><p>SPOOL before laterals</p></li>
<li><p>BOOT elsewhere</p></li>
</ul></li>
<li><p>PRICE becomes</p><ul><li><p>PRICE before voiceless segments</p></li>
<li><p>PRIZE elsewhere</p></li>
</ul></li>
</ul><p>Unfortunately, it is not straightforward to customize this list but you can 
always copy the source code and modify the list yourself.</p>
<p>Alternatively, you can use <code><a href="https://forcats.tidyverse.org/reference/fct_collapse.html" class="external-link">forcats::fct_collapse()</a></code> to collapse 
distinctions that you don't need. See example code below.</p>
<p>You can also of course create your own allophones if desired. Note that some
allophones depend on other environmental information like syllable structure and  
morpheme/word boundaries, or they may be entirely lexical (FORCE vs. NORTH). 
They may be more complicated than what ARPABET can code for (MARY, MERRY, and
MARRY) or just inconsistently coded. For the sake of simplicity, these 
allophones are not included in this function.</p>
<p>The environments therefore are the following</p><ul><li><p>"prelateral" includes ZEAL, GUILT, FLAIL, SHELF, TALC, GOLF, FAULT, MULCH, JOLT, WOLF, SPOOL</p></li>
<li><p>"prerhotic" includes NEAR, SQUARE, START, FORCE, CURE</p></li>
<li><p>"prevelar" includes BIG, VAGUE, BEG, BAG,</p></li>
<li><p>"prenasal" includes BIN, BEN, BAN</p></li>
<li><p>"prevelarnasal" includes BING, BENG, BANG</p></li>
<li><p>"prevoiceless" includes PRICE</p></li>
<li><p>"post-Y" includes MULE</p></li>
<li><p>"postcoronal" includes TOOT</p></li>
<li><p>"elsewhere" includes BEET, BIT, BAIT, BET, BAT, BOT, BOUGHT, BUT, BOAT, PUT, BOOT, PRIZE</p></li>
</ul></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressPackageStartupMessages</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Get some sample DARLA data to play with</span></span>
<span class="r-in"><span class="va">darla</span> <span class="op">&lt;-</span> <span class="fu">joeysvowels</span><span class="fu">::</span><span class="va"><a href="https://joeystanley.github.io/joeysvowels/reference/darla.html" class="external-link">darla</a></span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">vowel</span>, <span class="va">pre_seg</span>, <span class="va">fol_seg</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>phoneme <span class="op">=</span> <span class="fu">joeyr</span><span class="fu">:::</span><span class="fu"><a href="switch_transcriptions.html">arpa_to_wells</a></span><span class="op">(</span><span class="va">vowel</span><span class="op">)</span>, .after <span class="op">=</span> <span class="va">vowel</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Basic usage</span></span>
<span class="r-in"><span class="va">darla</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu">code_allophones</span><span class="op">(</span>.old_col <span class="op">=</span> <span class="va">phoneme</span>, .fol_seg <span class="op">=</span> <span class="va">fol_seg</span>, .pre_seg <span class="op">=</span> <span class="va">pre_seg</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_sample</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         word vowel phoneme allophone allophone_environment pre_seg fol_seg</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   MILITARY    IH     KIT       BIT             elsewhere       L       T</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    HAPPILY    AE    TRAP       BAT             elsewhere      HH       P</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    SYSTEMS    AH   STRUT       BUT             elsewhere       T       M</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       RAIN    EY    FACE      BAIT             elsewhere       R       N</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5        TWO    UW   GOOSE      TOOT           postcoronal       T       R</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   TEACHERS    ER   NURSE     NURSE             elsewhere      CH       Z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7         ON    AO THOUGHT    BOUGHT             elsewhere       T       N</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  DIFFICULT    IH     KIT       BIT             elsewhere       D       F</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9    HOWEVER    ER   NURSE     NURSE             elsewhere       V     IH1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10   SCHOOLS    UW   GOOSE     SPOOL            prelateral       K       L</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11   WINDOWS    OW    GOAT      BOAT             elsewhere       D       Z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12   VIEWERS    ER   NURSE     NURSE             elsewhere     UW1       Z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13     PATHS    AE    TRAP       BAT             elsewhere       P      TH</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14    SIMPLE    IH     KIT       BIN              prenasal       S       M</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15        BY    AY   PRICE     PRIZE             elsewhere       B      DH</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16        TO    UW   GOOSE      TOOT           postcoronal       T       Y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17    FLOWER    AW   MOUTH     MOUTH             elsewhere       L     ER0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18      YOUR    UH    FOOT      CURE             prerhotic       Y       R</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19 FINANCIAL    AE    TRAP       BAN              prenasal       N       N</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20      GOOD    UH    FOOT       PUT             elsewhere       G       D</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Specify the names of the new columns with the `.new_cols` argument</span></span>
<span class="r-in"><span class="va">darla</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu">code_allophones</span><span class="op">(</span>.old_col <span class="op">=</span> <span class="va">phoneme</span>, </span>
<span class="r-in">                  .new_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"allophone"</span>, <span class="st">"environment"</span><span class="op">)</span>, </span>
<span class="r-in">                  .fol_seg <span class="op">=</span> <span class="va">fol_seg</span>, </span>
<span class="r-in">                  .pre_seg <span class="op">=</span> <span class="va">pre_seg</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_sample</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              word vowel phoneme allophone   environment pre_seg fol_seg</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1           SMALL    AO THOUGHT     FAULT    prelateral       M       L</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2             RUN    AH   STRUT       BUT     elsewhere       R       N</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3              ON    AO THOUGHT    BOUGHT     elsewhere       T       N</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4           SWEAT    EH   DRESS       BET     elsewhere       W       T</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5           EARLY    IY  FLEECE      BEET     elsewhere       L      DH</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6            LOUD    AW   MOUTH     MOUTH     elsewhere       L       D</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7    NEIGHBORHOOD    EY    FACE      BAIT     elsewhere       N       B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8              ON    AO THOUGHT    BOUGHT     elsewhere       V       N</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9         PLEASES    IH     KIT       BIT     elsewhere       Z       Z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10         BEHAVE    EY    FACE      BAIT     elsewhere      HH       V</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11     IDENTIFIED    AY   PRICE     PRIZE     elsewhere       F       D</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12           FEEL    IY  FLEECE      ZEAL    prelateral       F       L</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13      PREPARING    IH     KIT      BING prevelarnasal       R      NG</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14           HALF    AE    TRAP       BAT     elsewhere      HH       F</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15       DISTRICT    IH     KIT       BIT     elsewhere       D       S</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16        REGULAR    EY    FACE     VAGUE      prevelar       R       G</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17     ASSESSMENT    AH   STRUT       BUT     elsewhere       M       N</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18 IMPLEMENTATION    EY    FACE      BAIT     elsewhere       T      SH</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19        WILLING    IH     KIT      BING prevelarnasal       L      NG</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20        QUARTER    AO THOUGHT     FORCE     prerhotic       W       R</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Filtering by environment is straightforward</span></span>
<span class="r-in"><span class="va">darla</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu">code_allophones</span><span class="op">(</span>.old_col <span class="op">=</span> <span class="va">phoneme</span>, </span>
<span class="r-in">                  .new_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"allophone"</span>, <span class="st">"environment"</span><span class="op">)</span>, </span>
<span class="r-in">                  .fol_seg <span class="op">=</span> <span class="va">fol_seg</span>, </span>
<span class="r-in">                  .pre_seg <span class="op">=</span> <span class="va">pre_seg</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">environment</span> <span class="op">==</span> <span class="st">"elsewhere"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_sample</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          word vowel phoneme allophone environment pre_seg fol_seg</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1        LOGS    AO THOUGHT    BOUGHT   elsewhere       L       G</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       ABOUT    AW   MOUTH     MOUTH   elsewhere       B       T</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    SLEEPING    IY  FLEECE      BEET   elsewhere       L       P</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         OUT    AW   MOUTH     MOUTH   elsewhere       T       T</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      CLOSER    OW    GOAT      BOAT   elsewhere       L       Z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     CHAMBER    ER   NURSE     NURSE   elsewhere       B     AE1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7       LINDA    AH   STRUT       BUT   elsewhere       D       N</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      GRADES    EY    FACE      BAIT   elsewhere       R       D</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  BOUNDARIES    AW   MOUTH     MOUTH   elsewhere       B       N</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10     TREATS    IY  FLEECE      BEET   elsewhere       R       T</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11      THROW    OW    GOAT      BOAT   elsewhere       R     IH1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12        RUN    AH   STRUT       BUT   elsewhere       R       N</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13    POCKETS    AA     LOT       BOT   elsewhere       P       K</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14       ABLE    EY    FACE      BAIT   elsewhere       Z       B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15  JEFFERSON    AH   STRUT       BUT   elsewhere       S       N</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16  MARIJUANA    AH   STRUT       BUT   elsewhere       N        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17 WASHINGTON    AO THOUGHT    BOUGHT   elsewhere       W      SH</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18 INNOVATION    EY    FACE      BAIT   elsewhere       V      SH</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19         ON    AO THOUGHT    BOUGHT   elsewhere       D       N</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20      LATER    EY    FACE      BAIT   elsewhere       L       T</span>
<span class="r-in"><span class="va">darla</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu">code_allophones</span><span class="op">(</span>.old_col <span class="op">=</span> <span class="va">phoneme</span>, </span>
<span class="r-in">                  .new_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"allophone"</span>, <span class="st">"environment"</span><span class="op">)</span>, </span>
<span class="r-in">                  .fol_seg <span class="op">=</span> <span class="va">fol_seg</span>, </span>
<span class="r-in">                  .pre_seg <span class="op">=</span> <span class="va">pre_seg</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="va">environment</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"prerhotic"</span>, <span class="st">"prevelarnasal"</span>, <span class="st">"prevelar"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_sample</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         word vowel phoneme allophone environment pre_seg fol_seg</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  AFTERNOON    AE    TRAP       BAT   elsewhere       Z       F</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      DEATH    EH   DRESS       BET   elsewhere       D      TH</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3        HAD    AE    TRAP       BAT   elsewhere      HH       D</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      THOSE    OW    GOAT      BOAT   elsewhere      DH       Z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    MEMBERS    EH   DRESS       BEN    prenasal       M       M</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         OR    ER   NURSE     NURSE   elsewhere     IY0     EY1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7       LENA    IY  FLEECE      BEET   elsewhere       L       N</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8    YOUNGER    ER   NURSE     NURSE   elsewhere       G      DH</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9       LONG    AO THOUGHT    BOUGHT   elsewhere       L      NG</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10     WORDS    ER   NURSE     NURSE   elsewhere       W       D</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11  KITCHENS    IH     KIT       BIT   elsewhere       K      CH</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12       ALL    AO THOUGHT     FAULT  prelateral       D       L</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13        ON    AO THOUGHT    BOUGHT   elsewhere       T       N</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 FEROCIOUS    OW    GOAT      BOAT   elsewhere     ER0      SH</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15   SUCCESS    EH   DRESS       BET   elsewhere       S       S</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16      GAME    EY    FACE      BAIT   elsewhere       G       M</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17  AILMENTS    EY    FACE     FLAIL  prelateral               L</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18   FOLIAGE    IH     KIT       BIT   elsewhere     IY0      JH</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19    EXPECT    EH   DRESS       BET   elsewhere       P       K</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20     SEEDS    IY  FLEECE      BEET   elsewhere       S       D</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Some users may want to supply their own list of coronal consonants.</span></span>
<span class="r-in"><span class="va">darla</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu">code_allophones</span><span class="op">(</span>.old_col <span class="op">=</span> <span class="va">phoneme</span>, </span>
<span class="r-in">                  .new_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"allophone"</span>, <span class="st">"environment"</span><span class="op">)</span>,</span>
<span class="r-in">                  .fol_seg <span class="op">=</span> <span class="va">fol_seg</span>, </span>
<span class="r-in">                  .pre_seg <span class="op">=</span> <span class="va">pre_seg</span>,</span>
<span class="r-in">                  .coronals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"T"</span>, <span class="st">"D"</span>, <span class="st">"S"</span>, <span class="st">"Z"</span>, <span class="st">"SH"</span>, <span class="st">"ZH"</span>, <span class="st">"JH"</span>, <span class="st">"N"</span>, <span class="st">"Y"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">phoneme</span> <span class="op">==</span> <span class="st">"GOOSE"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_sample</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           word vowel phoneme allophone environment pre_seg fol_seg</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         DULY    UW   GOOSE      TOOT postcoronal       D       L</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          TOO    UW   GOOSE      TOOT postcoronal       T       K</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    MOLECULES    UW   GOOSE      MULE      post-Y       Y       L</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4        DOING    UW   GOOSE      TOOT postcoronal       D     IH0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5           TO    UW   GOOSE      TOOT postcoronal       T        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6           TO    UW   GOOSE      TOOT postcoronal       T     IH0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7         INTO    UW   GOOSE      TOOT postcoronal       T     SIL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  CONTRIBUTED    UW   GOOSE      MULE      post-Y       Y       T</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9   INTRODUCES    UW   GOOSE      TOOT postcoronal       D       S</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10        POOL    UW   GOOSE     SPOOL  prelateral       P       L</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11     FOOLISH    UW   GOOSE     SPOOL  prelateral       F       L</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12        INTO    UW   GOOSE      TOOT postcoronal       T       W</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13     SCHOOLS    UW   GOOSE     SPOOL  prelateral       K       L</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14      UNIQUE    UW   GOOSE      MULE      post-Y       Y       N</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15        POOL    UW   GOOSE     SPOOL  prelateral       P       L</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16        POOR    UW   GOOSE      BOOT   elsewhere       P       R</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17     PREVIEW    UW   GOOSE      MULE      post-Y       Y      HH</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18        INTO    UW   GOOSE      TOOT postcoronal       T     AH0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19          TO    UW   GOOSE      TOOT postcoronal       T      HH</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20      HUMANS    UW   GOOSE      MULE      post-Y       Y       M</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Other users may want to specify their own list of voiceless consonants. </span></span>
<span class="r-in"><span class="va">darla</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu">code_allophones</span><span class="op">(</span>.old_col <span class="op">=</span> <span class="va">phoneme</span>, </span>
<span class="r-in">                  .new_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"allophone"</span>, <span class="st">"environment"</span><span class="op">)</span>,</span>
<span class="r-in">                  .fol_seg <span class="op">=</span> <span class="va">fol_seg</span>, </span>
<span class="r-in">                  .pre_seg <span class="op">=</span> <span class="va">pre_seg</span>,</span>
<span class="r-in">                  .voiceless <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"P"</span>, <span class="st">"T"</span>, <span class="st">"K"</span>, <span class="st">"CH"</span>, <span class="st">"F"</span>, <span class="st">"TH"</span>, <span class="st">"S"</span>, <span class="st">"SH"</span>, <span class="st">"X"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">phoneme</span> <span class="op">==</span> <span class="st">"PRICE"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_sample</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          word vowel phoneme allophone  environment pre_seg fol_seg</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      RELIES    AY   PRICE     PRIZE    elsewhere       L       Z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2        TIME    AY   PRICE     PRIZE    elsewhere       T       M</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   SURVIVORS    AY   PRICE     PRIZE    elsewhere       V       V</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     SCIENCE    AY   PRICE     PRIZE    elsewhere       S     AH0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5        EYES    AY   PRICE     PRIZE    elsewhere       N       Z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6        TIME    AY   PRICE     PRIZE    elsewhere       T       M</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  IDENTIFIED    AY   PRICE     PRIZE    elsewhere       F       D</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8       RIGHT    AY   PRICE     PRICE prevoiceless       R       T</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9    BRIGHTLY    AY   PRICE     PRICE prevoiceless       R       T</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10    LIBRARY    AY   PRICE     PRIZE    elsewhere       L       B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11   INSIDERS    AY   PRICE     PRIZE    elsewhere       S       D</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12       TIME    AY   PRICE     PRIZE    elsewhere       T       M</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13       HIGH    AY   PRICE     PRIZE    elsewhere      HH        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14       LIKE    AY   PRICE     PRICE prevoiceless       L       K</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15      ITEMS    AY   PRICE     PRICE prevoiceless               T</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16       SIZE    AY   PRICE     PRIZE    elsewhere       S       Z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17      MILES    AY   PRICE     PRIZE    elsewhere       M       L</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18     TRIBES    AY   PRICE     PRIZE    elsewhere       R       B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19  RECOGNIZE    AY   PRICE     PRIZE    elsewhere       N       Z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20      TIMER    AY   PRICE     PRIZE    elsewhere       T       M</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Collapsing distinctions can be done post hoc (though it may take extra work to get the environment column to match.)</span></span>
<span class="r-in"><span class="va">darla</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu">code_allophones</span><span class="op">(</span>.old_col <span class="op">=</span> <span class="va">phoneme</span>, </span>
<span class="r-in">                  .new_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"allophone"</span>, <span class="st">"environment"</span><span class="op">)</span>, </span>
<span class="r-in">                  .fol_seg <span class="op">=</span> <span class="va">fol_seg</span>, </span>
<span class="r-in">                  .pre_seg <span class="op">=</span> <span class="va">pre_seg</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="co"># Get a subset for demonstration purposes</span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">allophone</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BIT"</span>, <span class="st">"BIG"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">allophone</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_sample</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="co"># Now collapse distinctions</span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>allophone <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_collapse.html" class="external-link">fct_collapse</a></span><span class="op">(</span><span class="va">allophone</span>, <span class="st">"BIT"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BIT"</span>, <span class="st">"BIG"</span><span class="op">)</span><span class="op">)</span>,</span>
<span class="r-in">         environment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">allophone</span> <span class="op">==</span> <span class="st">"BIT"</span>, <span class="st">"elsewhere"</span>, <span class="va">allophone</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 10 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    word      vowel phoneme allophone environment pre_seg fol_seg</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> EXISTENCE IH    KIT     BIT       elsewhere   IY0     G      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> BEGINNING IH    KIT     BIT       elsewhere   B       G      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> EXISTED   IH    KIT     BIT       elsewhere   Z       G      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> BIG       IH    KIT     BIT       elsewhere   B       G      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> EXOTIC    IH    KIT     BIT       elsewhere   V       G      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> GIVE      IH    KIT     BIT       elsewhere   G       V      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> WITH      IH    KIT     BIT       elsewhere   W       TH     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> MISSION   IH    KIT     BIT       elsewhere   M       SH     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> HIS       IH    KIT     BIT       elsewhere   HH      Z      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> EXISTED   IH    KIT     BIT       elsewhere   Z       S      </span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Creating new allophones depends on the complexity of the allophone         </span></span>
<span class="r-in"><span class="va">darla</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu">code_allophones</span><span class="op">(</span>.old_col <span class="op">=</span> <span class="va">phoneme</span>, </span>
<span class="r-in">                  .new_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"allophone"</span>, <span class="st">"environment"</span><span class="op">)</span>, </span>
<span class="r-in">                  .fol_seg <span class="op">=</span> <span class="va">fol_seg</span>, </span>
<span class="r-in">                  .pre_seg <span class="op">=</span> <span class="va">pre_seg</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="co"># Create voice and voiceless distinctions for MOUTH</span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>allophone <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span><span class="va">phoneme</span> <span class="op">==</span> <span class="st">"MOUTH"</span> <span class="op">&amp;</span> <span class="va">fol_seg</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"P"</span>, <span class="st">"T"</span>, <span class="st">"K"</span>, <span class="st">"CH"</span>, <span class="st">"F"</span>, <span class="st">"TH"</span>, <span class="st">"S"</span>, <span class="st">"SH"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"BOUT"</span>,</span>
<span class="r-in">                               <span class="va">phoneme</span> <span class="op">==</span> <span class="st">"MOUTH"</span> <span class="op">~</span> <span class="st">"LOUD"</span>,</span>
<span class="r-in">                               <span class="cn">TRUE</span> <span class="op">~</span> <span class="va">allophone</span><span class="op">)</span>,</span>
<span class="r-in">         environment <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="va">allophone</span> <span class="op">==</span> <span class="st">"BOUT"</span>,  <span class="st">"prevoiceless"</span>, <span class="va">environment</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="co"># Get a subset for demonstration purposes</span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">phoneme</span> <span class="op">==</span> <span class="st">"MOUTH"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">allophone</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_sample</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 10 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    word      vowel phoneme allophone environment  pre_seg fol_seg</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> OUT       AW    MOUTH   BOUT      prevoiceless T       T      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> OUT       AW    MOUTH   BOUT      prevoiceless L       T      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> OUT       AW    MOUTH   BOUT      prevoiceless T       T      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> OUT       AW    MOUTH   BOUT      prevoiceless D       T      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> OUT       AW    MOUTH   BOUT      prevoiceless M       T      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> POWERLESS AW    MOUTH   LOUD      elsewhere    P       ER0    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> GROUND    AW    MOUTH   LOUD      elsewhere    R       N      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> DOWN      AW    MOUTH   LOUD      elsewhere    D       N      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> HOW       AW    MOUTH   LOUD      elsewhere    HH      HH     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> COUNTER   AW    MOUTH   LOUD      elsewhere    K       N      </span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Joseph A. Stanley.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

