<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Functions for Vowel Data • joeyr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Functions for Vowel Data">
<meta property="og:description" content="A hodge-podge of useful functions.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-86802921-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-86802921-2');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">joeyr</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/JoeyStanley/joeyr/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="joeyr" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#joeyr" class="anchor"></a>joeyr</h1></div>
<p>A hodge-podge of useful functions.</p>
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>This is essentially my sandbox R Package. It has a hodge-podge of functions that I’ve used over the past several years. As I work with my sociophonetic data, I find myself running the same sorts of procedures over and over, so I often decide to write a generalized function to take care of that stuff in one line within a tidyverse pipeline.</p>
<p>The functions in <code>joeyr</code> can be grouped into about five different categories: the outlier detecters, sociophonetics functions, <code>ggplot2</code> themes, the “grapes”, and other helpful functions. This README briefly explains them all.</p>
<p>Some of these functions I’ve generalized into something that others may find useful. Others are very specific to my own code and workflow so I’m not sure if they’ll be useful to you. Some functions are documented well but lots are not.</p>
<p>For questions, feel free to contact me at <a href="mailto:joey_stanley@byu.edu" class="email">joey_stanley@byu.edu</a> or on Twitter at <a href="https://twitter.com/joey_stan">@joey_stan</a>.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>This package can be downloaded to your computer by downloading it from Github.</p>
<div class="sourceCode" id="cb1"><pre class="r"><span class="co">#install.packages("devtools") # &lt;- if not already installed</span>
<span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">"JoeyStanley/joeyr"</span>)</pre></div>
<p>You can then load it like any other package.</p>
<div class="sourceCode" id="cb2"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">joeyr</span>)</pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="co">## This is the "joeyr" package.</span></span></code></pre></div>
<p>You’ll know you’ve got it installed properly when you see a little message saying <code>This is the "joeyr" package.</code>.</p>
</div>
<div id="group-1-the-filter" class="section level2">
<h2 class="hasAnchor">
<a href="#group-1-the-filter" class="anchor"></a>Group 1: The Filter</h2>
<p>The main function, and the reason I created the package in the first place, is <code>find_outliers</code>. It implements a version of the Mahalanobis Distance, except it does so iteratively. After finding the distances for each point, it marks the furthest token as an outlier, and then recalculates the distance based on the remaining points. It continues this one-at-a-time procedure until a proportion of your data (that you’ve specified) has been removed.</p>
<p>For more details, see <code><a href="reference/find_outliers.html">?find_outliers</a></code>. In the future I’ll write a vignette, blog post, or (perhaps some day) an article about it. For now, look at the help page or email me.</p>
<p>Note that there used to be some functions related to outliers in the package: <code>joey_filter</code> and its helper functions, <code>joey_do_pca</code>, <code>joey_adjust_cutoff</code>, and <code>joey_rm_outliers</code>. Those did outlier detection using Cook’s D but I’ve since discovered that the method was inherently flawed. I also tried to algorithmically determine a cutoff for how much data should be filtered, but I could never get it to work and it always removed too much data. Besides, the functions were buggy, slow, and more complicated than probably needed (they were my first attempt at R functions). Be aware that I’ve removed them in version 0.4 of <code>{joeyr}</code>. You should switch to <code>find_outliers</code> instead. If you need to use them you can still find them in the <code>R_depreciated</code> folder on GitHub, but they are no longer a part of the package.</p>
</div>
<div id="group-2-sociophonetics-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#group-2-sociophonetics-functions" class="anchor"></a>Group 2: Sociophonetics functions</h2>
<p>Some functions in <code>joeyr</code> are essentially mathmatical functions in that they crunch some numbers. They’re all relevant to sociophonetic data.</p>
<ul>
<li><p><code>eucl_dist</code> calculates the Euclidean Distance, given a pair of <em>x</em> and <em>y</em> (or, more commonly, F1 and F2) coordinates.</p></li>
<li><p><code>pillai</code> calculates the Pillai score. It’s not a complicated process in general, but this function simplifies it down quite a bit so it doesn’t interrupt your workflow.</p></li>
<li><p><code>tidy_mahalanobis</code> is probably my favorite. It’s an implementation of the <code>mahalanobis</code> function, which calculates the Mahalanobis distance, only it’s meant to work within a <code>tidyverse</code> pipeline of commands. Like the <code>pillai</code> function, it’s designed so that you can get the values you want without interrupting your flow.</p></li>
<li><p><code>norm_anae</code> makes it easy to do vowel formant normalization using the method described in the <em>Atlas of North American English</em> using just one line of code within a tidyverse pipeline. This is my current favorite normalization procedure and I was sick of writing large blocks of code in all my scripts, so I wrapped it up as a package.</p></li>
<li><p><code>norm_deltaF</code> is qanother way to normalize your data, based on Keith Johnson’s (2020) paper.</p></li>
<li><p><code>lbms_index</code> allows you to quickly calculate the Low-Back-Merger Shift Index in your data (see Becker 2019; Boberg 2019).</p></li>
</ul>
</div>
<div id="group-3-ggplot2-themes" class="section level2">
<h2 class="hasAnchor">
<a href="#group-3-ggplot2-themes" class="anchor"></a>Group 3: <code>ggplot2</code> themes</h2>
<p>These are currently not documented. The main one is <code>theme_joey</code> which will produce plots using my own flavor of <code>theme_bw</code>. There are some variants as well. The other helpful function is <code>joey_arrow</code> which is just a shortcut for a type of arrow I like when I draw lines on a plot.</p>
</div>
<div id="group-4-the-grapes" class="section level2">
<h2 class="hasAnchor">
<a href="#group-4-the-grapes" class="anchor"></a>Group 4: The grapes</h2>
<p>“Grapes” refer to the type of R functions that are flanked on either side by <code>%</code>, like <code><a href="https://rdrr.io/r/base/match.html">%in%</a></code>. The ones here came about while writing my dissertation (or rather, the code used to analze the data for my dissertation) and were super helpful for that project.</p>
<ul>
<li><p><code><a href="reference/grapes-ni-grapes.html">%ni%</a></code> (“not in”") is super handy and is the opposite if <code><a href="https://rdrr.io/r/base/match.html">%in%</a></code>. I don’t use it so much anymore because I’ve figured out how to use <code>!</code> properly, but I still love it.</p></li>
<li><p><code><a href="reference/grapes-wi-grapes.html">%wi%</a></code> (“within”) was one I wrote to see whether a number is within a range. I think tidyverse has <code>%within%</code> somewhere in its suite of packages, but I wrote this before I knew about it. Plus, it’s a little shorter.</p></li>
<li><p><code><a href="reference/grapes-expanded_by-grapes.html">%expanded_by%</a></code> takes a number and a range and expands the range by that much (applied to both sides). So <code>c(1, 3) %expanded_by% 3</code> produces <code><a href="https://rdrr.io/r/base/c.html">c(-2, 6)</a></code>. It was helpul when I was automating the plots in my dissertation.</p></li>
</ul>
</div>
<div id="group-5-other-helpful-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#group-5-other-helpful-functions" class="anchor"></a>Group 5: Other helpful functions</h2>
<p>While writing my dissertation, I found myself doing the same sort of pipeline over and over so I just made a couple little shortcut functions to save myself some typing.</p>
<ul>
<li><p><code>color_gradienter</code> was needed in my Shiny app, <a href="http://lap3.libs.uga.edu/u/jstanley/vowelcharts/"><em>The Gazetteer of Southern Vowels</em></a>. I needed a way to take two arbitrary colors and produce an arbitrary number of colors at fixed intervals between them. This is helpful for plots: do you want to use your favorite color of green and your favorite color of blue, but also get three more colors in between them for a continuous scale? <code>color_gradienter</code> can do that. I don’t know everything about how color is encoded, but it seems to work well enough for me, though there may be some weird bugs.</p></li>
<li><p><code>ucfirst</code> was a function I copied over from Perl code. It just capitalizes the first character of a string. Unlike some other functions that are more sophisticaed and transform the text into title case, sometimes I just need the very first character only, rather than the first character of each word.</p></li>
</ul>
</div>
<div id="depreciated-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#depreciated-functions" class="anchor"></a>Depreciated functions</h2>
<p>Previous versions of <code>{{joeyr}}</code> had a couple other tools, but recent versions of <code>{tidyr}</code> and <code>{dplyr}</code> have rendered them unnecessary. The following are no longer part of <code>{joeyr}</code>, though you can find the code on GitHub in the <code>R_depreciated</code> folder.</p>
<ul>
<li><p><code>spread_n</code> was perhaps my favorite function. I had a need for using the (old) <code><a href="https://tidyr.tidyverse.org/reference/spread.html">tidyr::spread</a></code> with multiple <code>value</code> columns while reshaping formant data. I went to the RStudio forums and someone wrote a slick little function for me that I dubbed <code>spread_n</code>. (Kieran Healey saw that post and wrote a <a href="https://kieranhealy.org/blog/archives/2018/11/06/spreading-multiple-values/">blog post</a> on it!). The function has since been rendered obsolete with the new <code><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">tidyr::pivot_wider</a></code> (Kieran Healey <a href="https://kieranhealy.org/blog/archives/2019/10/21/widening-multiple-columns-redux/">wrote</a> about that too), so I don’t use <code>spread_n</code> anymore. Perhaps it’ll eventually be removed from the package. But I can’t help but think that my asking that question had some role in the <code>pivot_wider</code> function.</p></li>
<li><p><code>move_x_after_y</code> and <code>move_x_before_y</code> are helpful for when you want to take a column that you’ve just created and move it before or after some existing column. It’s a little buggy when you work with columns on the edges of your dataframe, but it worked well for me and my dissertation code. Note that once <code>dplyr</code> 1.0.0 is released, these functions will be phased out since the new <a href="https://dplyr.tidyverse.org/dev/reference/relocate.html"><code><a href="https://dplyr.tidyverse.org/reference/relocate.html">dplyr::relocate</a></code></a> function does what I intended these do to.</p></li>
</ul>
</div>
<div id="conclusion" class="section level2">
<h2 class="hasAnchor">
<a href="#conclusion" class="anchor"></a>Conclusion</h2>
<p>That’s <code>joeyr</code>. I hope you like it.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/JoeyStanley/joeyr/">https://​github.com/​JoeyStanley/​joeyr/​</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Joseph A. Stanley <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-9185-0048" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Joseph A. Stanley.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
